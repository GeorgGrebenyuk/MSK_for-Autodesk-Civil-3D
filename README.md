# Сборник русских систем координат для AutoCAD Civil 3D (MSK_for-Autodesk-Civil-3D)
## Описание:
Здесь содержатся конфигурационные файлы CSD, описывающие пользовательскую библиотеку систем координат для всех продуктов Autodesk (первоочередно, для AutoCAD Civil 3D, AutoCAD Map 3D, Autodesk Revit, Autodesk InfraWorks, Autodesk ReCap)
## Справка по пакету:
Приведена в отдельном справочном пособии [по ссылке](https://inj9.gitbook.io/msk-for-civil-3d/)
## Добавление/использование:
Рекомендуемый способ использования - через скачивание версии в [**разделе Releases**](https://github.com/GeorgGrebenyuk/MSK_for-Autodesk-Civil-3D/releases) и следование одному из двух вариантов: распаковке архива в папку или импорта определений из xml-файла:
### Распаковка архива

*%LOCALAPPDATA%\Autodesk\User Geospatial Coordinate Systems*

Вид размещенных файлов, гарантирующий корректную работу библиотеки представлен на ![скриншоте ниже:](/Docs/Screen/Root1.png)

**Примечание**: помимо конфигурационных файлов \*.csd в папке также могут присутствовать другие папки и данные (к примеру, архивы сборок координат)

### Импорт через xml-файл
Активируйте команду MapCSLibraryImport и выборите xml-файла из состава нужного Release. Обращаю внимание на необходимость для импортированных определений таким образом самостоятельно задать категорию.

# Дополнительная информация
## Объединение библиотек
В случае, если у вас есть необходимость добавить представленную библиотеку к вашей, рекомендуется изучить сведения [в данной статье](https://zen.yandex.ru/media/id/5d0dba97ecd5cf00afaf2938/pogrujaemsia-v-sistemy-koordinat-chast-4-avtomatizaciia-formirovaniia-biblioteki-sk-607707d2bfba535c1acb63d1). Логика работы будет строиться на формировании версии библиотеки в формате XML и её импорт (MAPCSLIBRARYIMPORT) к другой версии библиотеки (в чей состав вы хотите её включить). Этот же способ используется автором для публикации версии Ббилиотеки в xml-представлении
## Преобразование библиотеки в иное представление:
Начиная с версии Civil 3D 2018 (Map 3D 2018) появилась штатная возможность экспорта бибилиотеки координат через формат XML при помощи LSP-файла. Результирующий файл будет называться CSlibrary.xml и располагаться в папке "Документы" под профилем пользователя типа "C:\Users\User\Documents". Структура файла для экспорта определения системы координат МГГТ (Russia-MGGT) вместе со всеми связанными определениями представлена ниже:
```lisp
(command "MAPCSLIBRARYEXPORT"
"Russia-MGGT" "СистемаКоординат"
 " " "Да" "")
```
Все необходимые системы координат записываются построчно, функция "Да" отвечает за включение в итоговый XML-файл связанных определений (эллипсоидов/датумов).
Гибкий инструментарий по преобразованию библиотеки в иное представление (формат XML/WKT2) предоставляет пакет нодов Dynamo MapConnection, страница которого на GitHub приведена [по ссылке](https://github.com/TBS-Software/Dynamo.MapConnection) и справка [тут](https://inj9.gitbook.io/dynamo-mapconnection/)
